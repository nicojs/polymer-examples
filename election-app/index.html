<html>

<head>
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="/bower_components/polymer/polymer.html">
    <link rel="import" href="/bower_components/paper-elements/paper-elements.html">
    <link rel="import" href="/bower_components/iron-elements/iron-elements.html">
    <link rel="import" href="/bower_components/neon-animation/neon-animation.html">
    <link rel="import" href="/bower_components/neon-animation/neon-animated-pages.html">
    <link rel="import" href="/bower_components/app-elements/app-elements.html">
</head>

<body class="fullbleed layout vertical">


    <dom-module is="dom-bind" id="election-app">
        <template>
            <app-location route="{{route}}"></app-location>
            <app-route id="router" pattern="/:view" active="{{active}}" route="{{route}}" data="{{routeData}}" tail="{{routeTail}}"></app-route>
            <app-route id="router" pattern="/:id" active="{{secondActive}}" route="{{routeTail}}" data="{{routeChildData}}" tail="{{routeChildTail}}"></app-route>
            <paper-header-panel class="flex">
                <paper-toolbar>
                    <h1>{{message}}</h1>
                </paper-toolbar>
                <div>
                    <neon-animated-pages entry-animation="slide-from-right-animation" selected="{{routeData.view}}" exit-animation="slide-left-animation"
                        attr-for-selected="name" selected="0" id="pages">
                        <div name="vote">
                            <h3>Candidates:</h3>
                            <iron-list id="candidateGrid" grid items="{{candidates}}">
                                <template>
                                    <paper-card heading="Vote for" style="margin-top:2px;zoom:96%;width:45%;">
                                        {{item.name}} {{item.lastname}}
                                        <div class="card-actions">
                                            <paper-icon-button icon="info-outline" on-tap="_showInfo"></paper-icon-button>
                                            <paper-fab on-tap="vote" mini icon="star" style="float:right;margin-bottom:5px;"></paper-fab>
                                        </div>
                                    </paper-card>
                                </template>
                            </iron-list>
                            <div>
                                <h3>Votes:</h3>
                                <ul>
                                    <template is="dom-repeat" items="{{votes}}" sort="sortVotes">
                                        <li>1 for: {{item.candidate.name}} {{item.candidate.lastname}} on {{item.time}}</li>
                                    </template>
                                </ul>
                            </div>
                            <template is="dom-if" if="[[determineHasWinner(votes.*)]]">
                                <h3>We have a winner: {{getWinner(votes.*)}}</h3>
                            </template>
                        </div>
                        <div name="details">
                            <paper-card>
                                <div class="card-content">
                                    <div class="header">[[selectedCandidate.name]] [[selectedCandidate.lastname]] </div>
                                    <p>Biography for....</p>
                                </div>
                                <div class="card-actions">
                                    <p>Current votecount: {{_voteCount(selectedCandidate, votes.*)}} </p>
                                    <paper-button on-tap="_goBack">Back</paper-button>
                                </div>
                            </paper-card>
                        </div>
                    </neon-animated-pages>

                </div>
            </paper-header-panel>
        </template>
        <script src="/election-app.js"></script>
    </dom-module>

    <election-app></election-app>

    <script>
    
    var Candidate = function(name, lastname){
        this.name = name;
        this.lastname = lastname;  
    }

    var Vote = function(candidate, time){
        this.candidate = candidate;
        this.time = time; 
    }
    
    document.querySelector("election-app").message = "Election Day!";
    document.querySelector("election-app").candidates = [
        new Candidate('Donald', 'Dump'),
        new Candidate('Hilary', 'Clint') ];
    document.querySelector("election-app").votes = [];
    </script>

</body>

</html>